cmake_minimum_required(VERSION 3.12)
project(neo)
set(NEO_SCRIPT_NAME ${PROJECT_NAME})
include_directories(./include)
aux_source_directory(./src/util UTIL)
aux_source_directory(./src/engine ENGINE)
aux_source_directory(./src/engine/type ENGINE_TYPE)
aux_source_directory(./src/vm VM)
aux_source_directory(./src/vm/type VM_TYPE)
aux_source_directory(./src/vm/instruction VM_INSTRUCTION)
aux_source_directory(./src/vm/instruction VM_OPERATOR)
add_library(${PROJECT_NAME}-engine SHARED ${UTIL} ${ENGINE} ${ENGINE_TYPE})
add_library(${PROJECT_NAME}-vm SHARED ${VM} ${VM_TYPE} ${VM_INSTRUCTION} ${VM_OPERATOR})
add_executable(${PROJECT_NAME}.${CMAKE_BUILD_TYPE} src/main.c)
target_link_libraries(${PROJECT_NAME}.${CMAKE_BUILD_TYPE} PRIVATE ${NEO_SCRIPT_NAME}-engine ${NEO_SCRIPT_NAME}-vm)
add_subdirectory(tests)
